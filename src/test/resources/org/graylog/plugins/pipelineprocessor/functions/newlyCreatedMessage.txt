rule "operate on newly created message"
when true
then
  let x = create_message("new", "synthetic", now());

  set_field("removed_again", "foo", x);
  set_field("only_in", "new message", x);
  set_fields({ multi: "new message" }, x);
  set_field("has_source", has_field("source", x), x);
  route_to_stream(name: "some stream", message: x);
  remove_field("removed_again", x);
end